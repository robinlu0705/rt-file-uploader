<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>rt_file_loader</title>
  <link rel="stylesheet/less" type="text/css" href="rt_file_uploader.less" />
  <script src="https://use.fontawesome.com/b77f86cd62.js"></script>
  <script src="less.min.js" type="text/javascript"></script>
  <script src="jquery-1.7.1.min.js" type="text/javascript"></script>
  <script src="rt_file_uploader.js" type="text/javascript"></script>
</head>
<body>
  <div id="loader" style="margin: 20px; min-height: 160px; background-color: #f3f3f3;"></div>
  <script>
    var fileuploader;
    $(function() {
      var FileUploader = window.RT.FileUploader;
      fileuploader = FileUploader.gen($('#loader'), {
        limit: 3,
        minHeight: 160,
        thumbnailWidth: 120,
        thumbnailHeight: 90,
        galleryFilterOpts: [
          { categoryName: '全部圖片 (83)', categoryVal: '', totalPages: 3 },
          { categoryName: '未分類 (72)', categoryVal: '0', totalPages: 3 },
          { categoryName: 'TEST1 (11)', categoryVal: '4664344', totalPages: 1 }
        ],

        debug: true,
        /**
         * @callback updateCallback
         * @param {Object[]} list
         * @param {Number} list[].id
         * @param {String} list[].url
         * @param {String} list[].status
         * @param {Number} list[].progress
         * @param {String} list[].errMsg
         * @param {Object} list[].userDefinedData
         */

        /**
         * @param {Object[]} itemList
         * @param {Number} itemList[].id
         * @param {File} itemList[].file
         * @param {updateCallback} update
         */
        onUpload: function(itemList, update) {
          // replace setTimeout with your upload api using ajax
          setTimeout(function() {
            var retList = [];
            for (var i = 0; i < itemList.length; i++) {
              retList.push({
                id: itemList[i].id,
                url: './img/' + i.toString() + '.jpg',
                status: FileUploader.FILE_STATUS.COMPLETE,
                progress: 100,
                errMsg: '',
                userDefinedData: {
                  // anything you need
                }
              });
            }

            update(retList);
          }, 3000);
        },

        /**
         * @callback updateGalleryCallback
         * @param {Object[]} list
         * @param {String} list[].url
         * @param {Object} list[].userDefinedData
         */

        /**
         * @param {String} categoryVal
         * @param {Number} page
         * @param {updateGalleryCallback} update
         */
        onFetchGallery: function(categoryVal, page, update) {
          // replace setTimeout with your fetch api using ajax
          setTimeout(function() {
            var retList = [];
            for (var i = 0; i < 30; i++) {
              retList.push({
                url: './img/' + page.toString() + '.jpg',
                userDefinedData: {
                  // anything you need
                }
              });
            }

            update(retList);
          }, 3000);
        },

        /**
         * @param {Object[]} itemList
         * @param {Number} itemList[].id
         * @param {Number} itemList[].url
         * @param {File} itemList[].userDefinedData
         * @param {updateCallback} update
         */
        onUploadFromGallery: function(itemList, update) {
          // replace setTimeout with your upload api using ajax
          setTimeout(function() {
            var retList = [];
            for (var i = 0; i < itemList.length; i++) {
              retList.push({
                id: itemList[i].id,
                url: './img/' + i.toString() + '.jpg',
                status: FileUploader.FILE_STATUS.COMPLETE,
                progress: 100,
                errMsg: '',
                userDefinedData: {
                  // anything you need
                }
              });
            }

            update(retList);
          }, 3000);
        },
      });
    });
  </script>
</body>
</html>